lunr.my_index=[];jQuery(".post-preview").each(function(){var temp_obj={};temp_obj.name=jQuery(this).attr("id");temp_obj.text=jQuery(this).find("h2").text()+". "+jQuery(this).find("h3").text();window.lunr.my_index.push(temp_obj)});lunr.idx=lunr(function(){this.ref('name');this.field('text');lunr.my_index.forEach(function(doc){this.add(doc)},this)});lunr.search=function(){var search_result=lunr.idx.search(jQuery("input[type=search]:first").val());jQuery(".post-preview,h4").hide();if(search_result.length===0){jQuery("h4").show()}else{var selector=[];for(var i=0;i<search_result.length;i+=1){selector.push("#"+search_result[i]["ref"])}jQuery(selector.join(",")).show()}};jQuery(document).keypress(function(e){if(e.which==13){lunr.search()}});